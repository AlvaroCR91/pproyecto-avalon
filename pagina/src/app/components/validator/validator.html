<div class="validator-container">
  <button class="back-button" (click)="goBack()">‚Üê Back</button>
  <!-- Background image when waiting for input -->
  <div class="intro-image-container" *ngIf="!showResult && !notFound">
    <img src="images/introducirMensaje.png" alt="Enter your message" class="intro-image" />
  </div>

  <!-- Background image for result (correct/incorrect and not found) -->
  <div class="result-bg-container" *ngIf="showResult || notFound">
    <img [src]="getResultImage()" alt="Result" class="result-bg-image" />
  </div>

  <!-- Input form -->
  <div class="form-container" [class.with-result]="showResult">
    <div class="input-group">
      <textarea 
        id="userInput" 
        [(ngModel)]="userInput"
        (keyup.enter)="validateInput()"
        placeholder="Write the phrase here..."
        class="text-input"
        rows="3"
      ></textarea>
    </div>

    <div class="button-group">
      <button 
        (click)="validateInput()" 
        class="btn btn-primary"
        [disabled]="userInput.trim() === ''"
      >
        Verify
      </button>
      <button 
        (click)="clearForm()" 
        class="btn btn-secondary"
      >
        Clear
      </button>
    </div>
  </div>

  <!-- Message when phrase is not found -->
  <div class="not-found-message" *ngIf="notFound">
    <p>‚ö†Ô∏è Phrase not found. Please verify that you wrote it correctly.</p>
    <p style="margin-top: 0.5rem; font-weight: bold; color: #721c24;">‚è±Ô∏è Penalty: -1 minute of maximum time</p>
  </div>

  <!-- Validation result (only information, image is already in background) -->
  <div class="result-container" *ngIf="showResult && validationResult">
    <div class="result-image-wrapper">
      <!-- Additional information about the result -->
      <div class="result-info">
        <div class="group-counters">
          <span>ALFA: {{ groupCounters.ALFA }}/2</span>
          <span class="sep">|</span>
          <span>BETA: {{ groupCounters.BETA }}/2</span>
        </div>
        <h3 class="result-message" [class.correct]="validationResult.isCorrect" [class.incorrect]="!validationResult.isCorrect">
          {{ validationResult.resultMessage }}
        </h3>
        <p class="tree-info">Tree: {{ validationResult.treeName }} (Group {{ validationResult.groupName }})</p>
        <p class="explanation" *ngIf="validationResult.explanation">
          üí° {{ validationResult.explanation }}
        </p>
        <p class="penalty-message" *ngIf="!validationResult.isCorrect">
          ‚è±Ô∏è Penalty: -1 minute of maximum time
        </p>
        <p class="phase-message" *ngIf="validationResult && phaseCompleted[validationResult.groupName]">
          {{ phaseMessage }}
        </p>
      </div>
    </div>
  </div>
</div>
